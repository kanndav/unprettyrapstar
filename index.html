<!DOCTYPE html>
<html>
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-122340888-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-122340888-1');
  </script>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Unpretty Rapstar : HIP POP Princess Ranker</title>
  <meta name="viewport" content="initial-scale = 2.0, maximum-scale=1.0" />
  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="stylesheet" type="text/css" media="screen" href="styles.css" />
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Roboto+Condensed:400,700" rel="stylesheet">
</head>
<body>
  <div id="top-banner">
    <img id="banner-image" src="logo.png"/>
    <p id="banner-title">UNPRETTY RAPSTAR RANKER</p>
    <p id="banner-subtitle">Make your desired top 12 !!</p>
  </div>

  <div class="flex-container padded-box">
    <div>
      <div id="tooltip-container">
        <!-- add tool tip faq stuff here -->
      </div>

      <!-- Trainee Table -->
      <div id="table">
        <div id="table__filter-container">
          <input id="table__filter-input" oninput="filterTrainees(event)" type="text" placeholder="Search"/>
        </div>
        <div id="table__entry-container"></div>
      </div>

      <!-- Filters -->
      <div id="filters-container">
        <div id="filters-header"><strong>Filters</strong></div>
        <div>
          <input type="checkbox" name="show-eliminated" id="show-eliminated" onclick="showEliminatedClick(event)"/>
          <label class="checkbox-label" for="show-eliminated">Show Eliminated (At Bottom)</label>
        </div>
        <div>
          <input type="checkbox" name="show-top12" id="show-top12" onclick="showTop12Click(event)"/>
          <label class="checkbox-label" for="show-top12">Show Current Top 12</label>
        </div>
      </div>

      <!-- Share Links -->
      <div id="sharelink-container">
        <input type="button" id="getlink-button" value="Get link" onclick="generateShareLink()"/>
        <input type="text" placeholder="http://" id="getlink-textbox" readonly/>
        <input type="button" id="copylink-button" value="Copy" onclick="copyLink()"/>
      </div>
    </div>

    <!-- Pyramid -->
    <div id="ranking__pyramid">
      <div id="ranking__title"><strong>TOP 12</strong></div>

      <!-- Row 1: 1 spot -->
      <div class="ranking__row" id="pyramid-row-1">
        <div class="ranking__entry"><img class="ranking__entry-img" src="assets/crown.png"><div class="pyramid-name"></div><div class="pyramid-age"></div></div>
      </div>

      <!-- Row 2: 2 spots -->
      <div class="ranking__row" id="pyramid-row-2">
        <div class="ranking__entry"><img class="ranking__entry-img" src="assets/crown.png"><div class="pyramid-name"></div><div class="pyramid-age"></div></div>
        <div class="ranking__entry"><img class="ranking__entry-img" src="assets/crown.png"><div class="pyramid-name"></div><div class="pyramid-age"></div></div>
      </div>

      <!-- Row 3: 4 spots -->
      <div class="ranking__row" id="pyramid-row-3">
        <div class="ranking__entry"><img class="ranking__entry-img" src="assets/crown.png"><div class="pyramid-name"></div><div class="pyramid-age"></div></div>
        <div class="ranking__entry"><img class="ranking__entry-img" src="assets/crown.png"><div class="pyramid-name"></div><div class="pyramid-age"></div></div>
        <div class="ranking__entry"><img class="ranking__entry-img" src="assets/crown.png"><div class="pyramid-name"></div><div class="pyramid-age"></div></div>
        <div class="ranking__entry"><img class="ranking__entry-img" src="assets/crown.png"><div class="pyramid-name"></div><div class="pyramid-age"></div></div>
      </div>

      <!-- Row 4: 5 spots -->
      <div class="ranking__row" id="pyramid-row-4">
        <div class="ranking__entry"><img class="ranking__entry-img" src="assets/crown.png"><div class="pyramid-name"></div><div class="pyramid-age"></div></div>
        <div class="ranking__entry"><img class="ranking__entry-img" src="assets/crown.png"><div class="pyramid-name"></div><div class="pyramid-age"></div></div>
        <div class="ranking__entry"><img class="ranking__entry-img" src="assets/crown.png"><div class="pyramid-name"></div><div class="pyramid-age"></div></div>
        <div class="ranking__entry"><img class="ranking__entry-img" src="assets/crown.png"><div class="pyramid-name"></div><div class="pyramid-age"></div></div>
        <div class="ranking__entry"><img class="ranking__entry-img" src="assets/crown.png"><div class="pyramid-name"></div><div class="pyramid-age"></div></div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    // Trainee data with age included
    const trainees = [
      {name: "Yunon", hangul: "유논", country: "JAPAN", age: "200?", img: "assets/trainees/yunon.png"},
      {name: "Urara", hangul: "우라라", country: "JAPAN", age: "200?", img: "assets/trainees/urara.png"},
      {name: "Shiho", hangul: "시호", country: "JAPAN", age: "2009/2010", img: "assets/trainees/shiho.png"},
      {name: "Sena", hangul: "세나", country: "JAPAN", age: "2009", img: "assets/trainees/sena.png"},
      {name: "Sea", hangul: "세아", country: "JAPAN", age: "200?", img: "assets/trainees/sea.png"},
      {name: "Sasa", hangul: "사사", country: "JAPAN", age: "200?", img: "assets/trainees/sasa.png"},
      {name: "Saaya", hangul: "사아야", country: "JAPAN", age: "200?", img: "assets/trainees/saaya.png"},
      {name: "Rino", hangul: "리노", country: "JAPAN", age: "2007", img: "assets/trainees/rino.png"},
      {name: "Niko", hangul: "니코", country: "JAPAN", age: "200?", img: "assets/trainees/niko.png"},
      {name: "Natsuho", hangul: "나츠호", country: "JAPAN", age: "200?", img: "assets/trainees/natsuho.png"},
      {name: "Nana", hangul: "나나", country: "JAPAN", age: "200?", img: "assets/trainees/nana.png"},
      {name: "Miyabi", hangul: "미야비", country: "JAPAN", age: "200?", img: "assets/trainees/miyabi.png"},
      {name: "Mirika", hangul: "미리카", country: "JAPAN", age: "200?", img: "assets/trainees/mirika.png"},
      {name: "Mia", hangul: "미아", country: "JAPAN", age: "200?", img: "assets/trainees/mia.png"},
      {name: "Mayu", hangul: "마유", country: "JAPAN", age: "2011", img: "assets/trainees/mayu.png"},
      {name: "Koko", hangul: "코코", country: "JAPAN", age: "200?", img: "assets/trainees/koko.png"},
      {name: "Karin", hangul: "카린", country: "JAPAN", age: "2011", img: "assets/trainees/karin.png"},
      {name: "Hina", hangul: "히나", country: "JAPAN", age: "200?", img: "assets/trainees/hina.png"},
      {name: "Hanabi", hangul: "하나비", country: "JAPAN", age: "200?", img: "assets/trainees/hanabi.png"},
      {name: "Kokoro", hangul: "코코로", country: "JAPAN", age: "200?", img: "assets/trainees/kokoro.png"},
      {name: "Yun Seoyoung", hangul: "윤서영", country: "KOREA", age: "2007", img: "assets/trainees/seoyoung.png"},
      {name: "Yoon Sooin", hangul: "윤수인", country: "KOREA", age: "2005", img: "assets/trainees/sooin.png"},
      {name: "Yoon Chaeeun", hangul: "윤채은", country: "KOREA", age: "2005", img: "assets/trainees/chaeeun.png"},
      {name: "Yang Jaeyun", hangul: "양재윤", country: "KOREA", age: "200?", img: "assets/trainees/jaeyun.png"},
      {name: "Shin Yookyung", hangul: "신유경", country: "KOREA", age: "200?", img: "assets/trainees/yookyung.png"},
      {name: "Ryu Hajin", hangul: "류하진 A", country: "KOREA", age: "200?", img: "assets/trainees/hajin.png"},
      {name: "Nam Yuju", hangul: "남유주", country: "JAPAN/KOREA", age: "2007", img: "assets/trainees/yuju.png"},
      {name: "Min Jiho", hangul: "민지호", country: "KOREA", age: "2009", img: "assets/trainees/jiho.png"},
      {name: "Lee Seohyun", hangul: "이서현", country: "KOREA", age: "200?", img: "assets/trainees/seohyun.png"},
      {name: "Lee Jooeun", hangul: "이주은", country: "KOREA", age: "200?", img: "assets/trainees/jooeun.png"},
      {name: "Lee Chaeyeon", hangul: "이채연", country: "KOREA", age: "200?", img: "assets/trainees/chaeyeon.png"},
      {name: "Lee Chaehyun", hangul: "이채현", country: "KOREA", age: "200?", img: "assets/trainees/chaehyun.png"},
      {name: "Kwon Dohee", hangul: "권도희", country: "KOREA", age: "200?", img: "assets/trainees/dohee.png"},
      {name: "Kim Yeeun", hangul: "김예은", country: "KOREA", age: "200?", img: "assets/trainees/yeeun.png"},
      {name: "Kim Sujin", hangul: "김준서", country: "KOREA", age: "2009", img: "assets/trainees/sujin.png"},
      {name: "Kim Doyi", hangul: "김도이", country: "KOREA", age: "2008", img: "assets/trainees/doyi.png"},
      {name: "Kim Chaerin", hangul: "김채린", country: "KOREA", age: "2010", img: "assets/trainees/chaerin.png"},
      {name: "Han Heeheon", hangul: "한희연", country: "KOREA", age: "200?", img: "assets/trainees/heeheon.png"},
      {name: "Choi Youmin", hangul: "최유민", country: "KOREA", age: "200?", img: "assets/trainees/youmin.png"},
      {name: "Choi Gayoon", hangul: "최가윤", country: "KOREA", age: "200?", img: "assets/trainees/gayoon.png"}
    ];

    // Generate trainee table entries
    const tableContainer = document.getElementById("table__entry-container");
    trainees.forEach(t => {
      const div = document.createElement("div");
      div.classList.add("table__entry");

      div.innerHTML = `
        <div class="table__entry-icon">
          <img class="table__entry-img" src="${t.img}" />
          <div class="table__entry-icon-border group-border"></div>
        </div>
        <div class="table__entry-text">
          <strong><span class="name">${t.name}</span></strong>
          <span class="hangul">(${t.hangul})</span>
          <div class="age">Age: ${t.age}</div>
        </div>
      `;
      tableContainer.appendChild(div);
    });

    // Pyramid setup
    const pyramidSpots = Array.from(document.querySelectorAll("#ranking__pyramid .ranking__entry"));
    let top12 = [];

    // Click on trainee in table to add to pyramid
    tableContainer.addEventListener("click", e => {
      const entryDiv = e.target.closest(".table__entry");
      if(!entryDiv) return;

      const name = entryDiv.querySelector(".name").innerText;
      const trainee = trainees.find(t => t.name === name);
      if(!trainee) return;

      if(top12.includes(trainee)) return; // prevent duplicates

      // Find first empty spot (crown)
      const emptySpot = pyramidSpots.find(spot => spot.querySelector("img").src.includes("crown.png"));
      if(!emptySpot) return;

      // Place trainee
      emptySpot.querySelector("img").src = trainee.img;
      emptySpot.querySelector(".pyramid-name").innerText = trainee.name;
      emptySpot.querySelector(".pyramid-age").innerText = `Age: ${trainee.age}`;

      top12.push(trainee);
    });

    // Click on pyramid member to remove
    pyramidSpots.forEach(spot => {
      spot.addEventListener("click", () => {
        const img = spot.querySelector("img");
        const nameDiv = spot.querySelector(".pyramid-name");

        if(!img.src.includes("crown.png")) {
          const trainee = trainees.find(t => t.name === nameDiv.innerText);
          top12 = top12.filter(t => t !== trainee);

          // Reset spot
          img.src = "assets/crown.png";
          nameDiv.innerText = "";
          spot.querySelector(".pyramid-age").innerText = "";
        }
      });
    });
  </script>
</body>
</html>